<!doctype html>
<html lang="fr" data-theme="emperor">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Hashirama ‚Äî Interface Imp√©riale</title>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700;900&family=Cormorant+Garamond:ital,wght@0,300;0,600;1,300;1,600&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;1,9..40,300&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles/base.css">
  <link rel="stylesheet" href="styles/mobile.css">
  <link rel="stylesheet" href="styles/themes/emperor.css">
  <link rel="stylesheet" href="styles/themes/obsidian.css">
  <link rel="stylesheet" href="styles/themes/cyber.css">
  <link rel="stylesheet" href="styles/themes/ghost.css">
  <link rel="stylesheet" href="styles/themes/storm.css">
  <link rel="stylesheet" href="styles/themes/brutal.css">
</head>
<body>

  <div id="app" class="app viewport-desktop">

    <!-- BG layers -->
    <div class="bg-layer bg-layer-1"></div>
    <div class="bg-layer bg-layer-2"></div>

    <!-- Statue ghost (desktop only) -->
    <div class="statue-ghost" id="statueGhost">
      <div class="statue-base"></div>
      <div class="statue-body"></div>
      <div class="statue-neck"></div>
      <div class="statue-head"></div>
      <div class="statue-crown"></div>
      <div class="statue-crown-glow"></div>
      <div class="statue-eyes">
        <div class="statue-eye"></div>
        <div class="statue-eye"></div>
      </div>
      <div class="statue-floor-glow"></div>
    </div>

    <!-- ‚ïê‚ïê‚ïê MOBILE HEADER (hidden on desktop) ‚ïê‚ïê‚ïê -->
    <div class="mobile-hdr" id="mobileHeader">
      <div>
        <div class="mobile-logo">HASHIRAMA</div>
        <div class="mobile-logo-sub">Interface Imp√©riale</div>
      </div>
      <div class="mobile-badge" id="mobileBadge">
        <div class="mobile-badge-dot"></div>
        <span id="mobileStatusText">ACTIF</span>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê NAVBAR ‚ïê‚ïê‚ïê -->
    <nav class="navbar">
      <div class="navbar-left">
        <button class="navbar-btn sidebar-toggle" id="sidebarToggle" aria-label="Toggle sidebar">‚ò∞</button>
        <div class="navbar-brand">
          HASHIRAMA
          <span id="hashiramaConnectionDot" style="display:inline-block;width:8px;height:8px;border-radius:50%;margin-left:8px;background:#666;box-shadow:0 0 6px rgba(0,0,0,0.5);vertical-align:middle;" title="V√©rification..."></span>
        </div>
        <div class="navbar-sep"></div>
        <div class="navbar-subtitle">Interface Imp√©riale</div>
      </div>
      <div class="navbar-right">
        <button class="navbar-btn options-toggle" id="optionsToggle" aria-label="Options" style="display:none;">‚öô</button>

        <!-- Claude Connection Toggle -->
        <label class="claude-toggle hidden" id="claudeToggle" title="Activer Claude Code">
          <input type="checkbox" id="claudeToggleInput">
          <span class="claude-toggle-slider"></span>
          <span class="claude-toggle-label">Claude</span>
        </label>

        <div class="navbar-status">
          <div class="status-dot"></div>
          <span class="status-label" id="statusLabel">Claude ¬∑ Actif</span>
        </div>
        <div class="navbar-avatar" id="navAvatar" title="Profil">R</div>
      </div>
    </nav>

    <!-- ‚ïê‚ïê‚ïê LAYOUT BODY ‚ïê‚ïê‚ïê -->
    <div class="layout-body">

      <!-- Sidebar overlay (mobile/tablet) -->
      <div class="sidebar-overlay" id="sidebarOverlay"></div>

      <!-- ‚îÄ‚îÄ‚îÄ SIDEBAR ‚îÄ‚îÄ‚îÄ -->
      <aside class="sidebar" id="sidebar">

        <div class="sidebar-header">
          <span class="sidebar-label">Conversations</span>
          <button class="sidebar-new-btn" id="newConvBtn" title="Nouvelle conversation">+</button>
        </div>

        <div class="sidebar-search">
          <input type="text" id="convSearch" placeholder="Rechercher‚Ä¶" class="search-input" autocomplete="off">
        </div>

        <button class="sidebar-new-conv-btn" id="newConvBtnFull" type="button">+ Nouvelle conversation</button>

        <div class="sidebar-convs scroll" id="convList">
          <!-- Rendered by JS -->
        </div>

        <div class="sidebar-status">
          <div class="sidebar-status-header" id="statusToggle">
            <span class="sidebar-label">Consommation API</span>
            <span class="acc-arrow open">‚ñº</span>
          </div>
          <div class="sidebar-status-body" id="statusBody">
            <!-- Rendered by JS -->
          </div>
        </div>

      </aside>

      <!-- ‚îÄ‚îÄ‚îÄ MAIN CHAT ‚îÄ‚îÄ‚îÄ -->
      <main class="chat-main">

        <div class="chat-messages scroll" id="chatMessages">
          <div class="session-marker">
            <div class="marker-line"></div>
            <span class="marker-text" id="sessionMarker"></span>
            <div class="marker-line"></div>
          </div>
          <!-- Messages rendered by JS -->
        </div>

        <div class="chat-input-area">
          <div class="input-box">
            <div class="ornament tl"></div>
            <div class="ornament tr"></div>
            <div class="ornament bl"></div>
            <div class="ornament br"></div>
            <textarea id="chatInput" rows="1" placeholder="Votre commande imp√©riale‚Ä¶" autocomplete="off"></textarea>
            <div class="input-actions">
              <button class="attach-btn" id="attachBtn" title="Ajouter" type="button">‚äï</button>
              <button class="send-btn" id="sendBtn" type="button">Envoyer</button>
            </div>
          </div>
          <div class="input-meta" id="inputMeta">
            <div class="input-meta-left">
              <span>Mod√®le <em>claude-sonnet-4-6</em></span>
              <span>Session <em id="sessionTime">--:--</em></span>
            </div>
            <div class="input-meta-right">‚èé Envoyer ¬∑ ‚áß‚èé Newline ¬∑ ‚åòK Recherche</div>
          </div>
        </div>

      </main>

      <!-- ‚îÄ‚îÄ‚îÄ ARTIFACT PANEL ‚îÄ‚îÄ‚îÄ -->
      <aside class="artifact-panel hidden" id="artifactPanel">
        <div class="artifact-header">
          <div class="artifact-title">
            <span class="artifact-icon">‚ö°</span>
            <span class="artifact-name" id="artifactName">Artefact</span>
          </div>
          <div class="artifact-actions">
            <button class="artifact-btn" id="artifactCopy" title="Copier le code">üìã</button>
            <button class="artifact-btn" id="artifactDownload" title="T√©l√©charger">‚¨á</button>
            <button class="artifact-btn" id="artifactClose" title="Fermer">‚úï</button>
          </div>
        </div>
        <div class="artifact-body">
          <iframe id="artifactFrame" sandbox="allow-scripts allow-same-origin" frameborder="0"></iframe>
        </div>
      </aside>

      <!-- ‚îÄ‚îÄ‚îÄ RIGHT PANEL ‚îÄ‚îÄ‚îÄ -->
      <aside class="right-panel" id="rightPanel">
        <div class="right-panel-scroll scroll">

          <!-- Model selection -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Mod√®le IA</span>
              <span class="acc-arrow open">‚ñº</span>
            </div>
            <div class="acc-body" id="accModelBody"></div>
          </div>

          <!-- System prompt -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Prompt Syst√®me</span>
              <span class="acc-arrow open">‚ñº</span>
            </div>
            <div class="acc-body" id="accPromptBody"></div>
          </div>

          <!-- Admin Panel -->
          <div class="acc-section" id="accAdminSection" style="display:none;">
            <div class="acc-header">
              <span>üëë Administration</span>
              <span class="acc-arrow open">‚ñº</span>
            </div>
            <div class="acc-body" id="accAdminBody"></div>
          </div>

          <!-- Options -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Options Avanc√©es</span>
              <span class="acc-arrow open">‚ñº</span>
            </div>
            <div class="acc-body" id="accOptionsBody"></div>
          </div>

          <!-- Connecteurs -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Connecteurs</span>
              <span class="acc-arrow">‚ñº</span>
            </div>
            <div class="acc-body hidden" id="accConnectorsBody"></div>
          </div>

          <!-- Theme selector -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Th√®me Visuel</span>
              <span class="acc-arrow">‚ñº</span>
            </div>
            <div class="acc-body hidden" id="accThemeBody"></div>
          </div>

          <!-- Raccourcis (closed by default) -->
          <div class="acc-section">
            <div class="acc-header">
              <span>Raccourcis</span>
              <span class="acc-arrow">‚ñº</span>
            </div>
            <div class="acc-body hidden" id="accShortcutsBody"></div>
          </div>

        </div>
      </aside>

    </div>

    <!-- ‚ïê‚ïê‚ïê MOBILE BOTTOM ZONE (hidden on desktop) ‚ïê‚ïê‚ïê -->
    <div class="mobile-bzone" id="mobileBzone">
      <div class="mobile-cmp">
        <div class="mobile-cmp-inner">
          <textarea id="mobileInput" placeholder="Votre commande imp√©riale‚Ä¶" rows="1"></textarea>
          <div class="mobile-cmp-actions">
            <button class="mobile-cbtn mobile-cbtn-xtr" id="mobileAttachBtn" type="button">
              <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
            </button>
            <button class="mobile-cbtn mobile-cbtn-send" id="mobileSendBtn" type="button">
              <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4.5 10.5L12 3m0 0l7.5 7.5M12 3v18"/></svg>
            </button>
          </div>
        </div>
      </div>
      <div class="mobile-tabs" id="mobileTabs">
        <button class="mobile-tab" data-sheet="sessions">
          <div class="mobile-tab-iw"><div class="mobile-tab-bg"></div>
            <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193-.34.027-.68.052-1.02.072v3.091l-3-3c-1.354 0-2.694-.055-4.02-.163a2.115 2.115 0 01-.825-.242m9.345-8.334a2.126 2.126 0 00-.476-.095 48.64 48.64 0 00-8.048 0c-1.131.094-1.976 1.057-1.976 2.192v4.286c0 .837.46 1.58 1.155 1.951m9.345-8.334V6.637c0-1.621-1.152-3.026-2.76-3.235A48.455 48.455 0 0011.25 3c-2.115 0-4.198.137-6.24.402-1.608.209-2.76 1.614-2.76 3.235v6.226c0 1.621 1.152 3.026 2.76 3.235.577.075 1.157.14 1.74.194V21l4.155-4.155"/></svg>
          </div>
          <span>Sessions</span>
        </button>
        <button class="mobile-tab active" data-sheet="chat">
          <div class="mobile-tab-iw"><div class="mobile-tab-bg"></div>
            <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456z"/></svg>
          </div>
          <span>Chat</span>
        </button>
        <button class="mobile-tab" data-sheet="model">
          <div class="mobile-tab-iw"><div class="mobile-tab-bg"></div>
            <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 19.5V21M12 3v1.5m0 15V21m3.75-18v1.5m0 15V21m-9-1.5h10.5a2.25 2.25 0 002.25-2.25V6.75a2.25 2.25 0 00-2.25-2.25H6.75A2.25 2.25 0 004.5 6.75v10.5a2.25 2.25 0 002.25 2.25zm.75-12h9v9h-9v-9z"/></svg>
          </div>
          <span>Mod√®le</span>
        </button>
        <button class="mobile-tab" data-sheet="stats">
          <div class="mobile-tab-iw"><div class="mobile-tab-bg"></div>
            <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z"/></svg>
          </div>
          <span>Stats</span>
        </button>
        <button class="mobile-tab" data-sheet="options">
          <div class="mobile-tab-iw"><div class="mobile-tab-bg"></div>
            <svg viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.431.992a6.759 6.759 0 010 .255c-.007.378.138.75.43.99l1.005.828c.424.35.534.954.26 1.43l-1.298 2.247a1.125 1.125 0 01-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.57 6.57 0 01-.22.128c-.331.183-.581.495-.644.869l-.213 1.28c-.09.543-.56.941-1.11.941h-2.594c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 01-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 01-1.369-.49l-1.297-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.43-.992a6.932 6.932 0 010-.255c.007-.378-.138-.75-.43-.99l-1.004-.828a1.125 1.125 0 01-.26-1.43l1.297-2.247a1.125 1.125 0 011.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.087.22-.128.332-.183.582-.495.644-.869l.214-1.281z"/><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/></svg>
          </div>
          <span>Options</span>
        </button>
      </div>
    </div>

    <!-- ‚ïê‚ïê‚ïê MOBILE BACKDROP ‚ïê‚ïê‚ïê -->
    <div class="mobile-backdrop" id="mobileBackdrop"></div>

    <!-- ‚ïê‚ïê‚ïê MOBILE SHEETS ‚ïê‚ïê‚ïê -->
    <div class="mobile-sheet" id="mobileSheetSessions">
      <div class="mobile-sheet-handle"></div>
      <div class="mobile-sheet-title">SESSIONS</div>
      <div class="mobile-sheet-scroll" id="mobileSessionsList"></div>
    </div>

    <div class="mobile-sheet" id="mobileSheetModel">
      <div class="mobile-sheet-handle"></div>
      <div class="mobile-sheet-title">MOD√àLE IA</div>
      <div class="mobile-sheet-scroll" id="mobileModelList"></div>
    </div>

    <div class="mobile-sheet" id="mobileSheetStats">
      <div class="mobile-sheet-handle"></div>
      <div class="mobile-sheet-title">STATISTIQUES</div>
      <div class="mobile-sheet-scroll" id="mobileStatsContent"></div>
    </div>

    <div class="mobile-sheet" id="mobileSheetOptions">
      <div class="mobile-sheet-handle"></div>
      <div class="mobile-sheet-title">OPTIONS</div>
      <div class="mobile-sheet-scroll" id="mobileOptionsContent"></div>
    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê OPTIONS MODAL (Mobile/Tablet) ‚ïê‚ïê‚ïê -->
  <div id="optionsModal" class="login-modal hidden">
    <div class="login-card" style="max-width:92vw;max-height:90vh;overflow-y:auto;">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;">
        <div class="login-title" style="margin:0;">Options</div>
        <button id="closeOptions" style="background:transparent;border:1px solid var(--border-dim);width:32px;height:32px;cursor:pointer;color:var(--text-dim);">‚úï</button>
      </div>
      <div id="optionsModalContent" style="display:flex;flex-direction:column;gap:16px;"></div>
    </div>
  </div>

  <!-- ‚ïê‚ïê‚ïê LOGIN MODAL ‚ïê‚ïê‚ïê -->
  <div id="loginModal" class="login-modal">
    <div class="login-card">
      <div class="login-title">Connexion Imp√©riale</div>
      <p class="login-subtitle">Identifiez-vous pour acc√©der √† l'interface Hashirama.</p>
      <form id="loginForm" class="login-form">
        <input id="identifierInput" type="text" placeholder="Identifiant" required class="login-input" autocomplete="username">
        <input id="passwordInput" type="password" placeholder="Mot de passe" required class="login-input" autocomplete="current-password">
        <button type="submit" class="login-submit">Connexion</button>
      </form>
      <p class="login-hint">Utilisez votre profil ou vos identifiants administrateur.</p>
      <div id="adminPanel" class="admin-panel" style="display:none">
        <strong class="admin-title">Profils</strong>
        <pre id="adminProfiles" class="admin-profiles"></pre>
      </div>
    </div>
  </div>

  <script src="dist/script.js"></script>
</body>
</html>
